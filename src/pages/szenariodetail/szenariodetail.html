<ion-header>
  <ion-navbar>
    <button ion-button menuToggle>
      <ion-icon name="menu"></ion-icon>
    </button>
	<!-- Ausgabe des Usernamens der akutellen Seite
    Aktuelle Seite wird durch die Navigationsparameter in szenariodetail.ts festgelegt.-->
    <ion-title>Szenario von {{currentSzenario?.username}}</ion-title>
  </ion-navbar>
</ion-header>


<ion-content>
  <p padding>Problemdefinition: {{currentSzenario?.problemdefinition}}</p>

<div padding>
  <ion-segment [(ngModel)]="hilfen">
    <ion-segment-button value="Annahmen" (click)="hideSchluesselfaktoren()">
      Annahmen
    </ion-segment-button>
    <ion-segment-button value="randbedingungen" (click)="hideSchluesselfaktoren()">
      Randbedingungen
    </ion-segment-button>
	<ion-segment-button value="ereignisse" (click)="hideSchluesselfaktoren()">
      Ereignisse
    </ion-segment-button>
	<ion-segment-button value="schluesselfaktoren" (click)="toggleSchluesselfaktoren()">
      Schlüsselfaktoren
    </ion-segment-button>
  </ion-segment>
</div>

<div [ngSwitch]="hilfen">
  <ion-list *ngSwitchCase="'Annahmen'">
    <ion-item>
      <h6>Annahme 1:</h6>
	    <p>{{currentSzenario?.annahme1}}</p>
    </ion-item>
    <ion-item [hidden]="!currentSzenario?.annahmebegruendung1 || !toggleVar">
      <h6  padding-left>Begründung:</h6>
	    <p padding-left>{{currentSzenario?.annahmebegruendung1}}</p>
    </ion-item>	
    <ion-item>
      <h6>Annahme 2:</h6>
	    <p>{{currentSzenario?.annahme2}}</p>
    </ion-item>
    <ion-item [hidden]="!currentSzenario?.annahmebegruendung2 || !toggleVar">
      <h6  padding-left>Begründung:</h6>
	    <p padding-left>{{currentSzenario?.annahmebegruendung2}}</p>
    </ion-item>
    <ion-item [hidden]="!currentSzenario?.annahme3">
      <h6>Annahme 3:</h6>
	  <p>{{currentSzenario?.annahme3}}</p>
    </ion-item>
    <ion-item [hidden]="!currentSzenario?.annahmebegruendung3 || !toggleVar">
      <h6  padding-left>Begründung:</h6>
	    <p padding-left>{{currentSzenario?.annahmebegruendung4}}</p>
    </ion-item>
    <ion-item  [hidden]="!currentSzenario?.annahme4">
      <h6>Annahme 4:</h6>
	    <p>{{currentSzenario?.annahme4}}</p>
    </ion-item>
    <ion-item [hidden]="!currentSzenario?.annahmebegruendung4 || !toggleVar">
      <h6  padding-left>Begründung:</h6>
	    <p padding-left>{{currentSzenario?.annahmebegruendung4}}</p>
    </ion-item>
    <div [hidden]="!currentSzenario?.annahmebegruendung1 && !currentSzenario?.annahmebegruendung2
	&& !currentSzenario?.annahmebegruendung3 && !currentSzenario?.annahmebegruendung4" padding-bottom>
	  <ion-toggle float-right [(ngModel)]="toggleVar" name="ToggleVarAnnahmen"></ion-toggle>
      <p float-right>Begründungen ein- und ausblenden: </p>
    </div>
  </ion-list>
</div>
  
<div [ngSwitch]="hilfen">
  <ion-list *ngSwitchCase="'randbedingungen'">
    <ion-item>
      <h6>Randbedingung 1:</h6>
	    <p>{{currentSzenario?.randbedingung1}}</p>
    </ion-item>
    <ion-item [hidden]="!currentSzenario?.randbedingungbegruendung1 || !toggleVar">
      <h6  padding-left>Begründung:</h6>
	    <p padding-left>{{currentSzenario?.randbedingungbegruendung1}}</p>
    </ion-item>
    <ion-item>
      <h6>Randbedingung 2:</h6>
	    <p>{{currentSzenario?.randbedingung2}}</p>
    </ion-item>
    <ion-item [hidden]="!currentSzenario?.randbedingungbegruendung2 || !toggleVar">
      <h6  padding-left>Begründung:</h6>
	    <p padding-left>{{currentSzenario?.randbedingungbegruendung2}}</p>
    </ion-item>
    <ion-item [hidden]="!currentSzenario?.randbedingung3">
      <h6>Randbedingung 3:</h6>
	    <p>{{currentSzenario?.randbedingung3}}</p>
    </ion-item>
    <ion-item [hidden]="!currentSzenario?.randbedingungbegruendung3 || !toggleVar">
      <h6  padding-left>Begründung:</h6>
	    <p padding-left>{{currentSzenario?.randbedingungbegruendung3}}</p>
    </ion-item>
    <ion-item  [hidden]="!currentSzenario?.randbedingung4">
      <h6>Randbedingung 4:</h6>
	    <p>{{currentSzenario?.randbedingung4}}</p>
    </ion-item>
    <ion-item [hidden]="!currentSzenario?.randbedingungbegruendung4 || !toggleVar">
      <h6  padding-left>Begründung:</h6>
	    <p  padding-left>{{currentSzenario?.randbedingungbegruendung4}}</p>
    </ion-item>
    <div [hidden]="!currentSzenario?.randbedingungbegruendung1 && !currentSzenario?.randbedingungbegruendung2
	&& !currentSzenario?.randbedingungbegruendung3 && !currentSzenario?.randbedingungbegruendung4" padding-bottom>
	  <ion-toggle float-right [(ngModel)]="toggleVar" name="ToggleVarRandbedingungen"></ion-toggle>
      <p float-right>Begründungen ein- und ausblenden: </p>
    </div>
  </ion-list>
</div>  

<div [ngSwitch]="hilfen">
  <ion-list *ngSwitchCase="'ereignisse'">
    <ion-item>
      <h6>Ereignis 1:</h6>
	    <p>{{currentSzenario?.ereignis1}}</p>
    </ion-item>
    <ion-item [hidden]="!currentSzenario?.ereignisbegruendung1 || !toggleVar">
      <h6  padding-left>Begründung:</h6>
	    <p padding-left>{{currentSzenario?.ereignisbegruendung1}}</p>
    </ion-item>
    <ion-item>
      <h6>Ereignis 2:</h6>
	    <p>{{currentSzenario?.ereignis2}}</p>
    </ion-item>
    <ion-item [hidden]="!currentSzenario?.ereignisbegruendung2 || !toggleVar">
      <h6  padding-left>Begründung:</h6>
	    <p  padding-left>{{currentSzenario?.ereignisbegruendung2}}</p>
    </ion-item>
    <ion-item  [hidden]="!currentSzenario?.ereignis3">
      <h6>Ereignis 3:</h6>
	    <p>{{currentSzenario?.ereignis3}}</p>
    </ion-item>
    <ion-item  [hidden]="!currentSzenario?.ereignisbegruendung3 || !toggleVar">
      <h6  padding-left>Begründung:</h6>
	    <p  padding-left>{{currentSzenario?.ereignisbegruendung3}}</p>
    </ion-item>
    <ion-item   [hidden]="!currentSzenario?.ereignis4">
      <h6>Ereignis 4:</h6>
	    <p>{{currentSzenario?.ereignis4}}</p>
    </ion-item>
    <ion-item  [hidden]="!currentSzenario?.ereignisbegruendung4 || !toggleVar">
      <h6  padding-left>Begründung:</h6>
	    <p  padding-left>{{currentSzenario?.ereignisbegruendung4}}</p>
    </ion-item>
    <div [hidden]="!currentSzenario?.ereignisbegruendung1 && !currentSzenario?.ereignisbegruendung2
	&& !currentSzenario?.ereignisbegruendung3 && !currentSzenario?.ereignisbegruendung4" padding-bottom>
	  <ion-toggle float-right [(ngModel)]="toggleVar" name="ToggleVarEreignisse"></ion-toggle>
      <p float-right>Begründungen ein- und ausblenden: </p>
    </div>
  </ion-list> 
</div>

<div [hidden]='!toggleVarSchluesselfaktoren'>
    <ion-slides>
      <ion-slide [hidden]='!currentSzenario?.schluesselfaktor1'>
        <p>Nach links oder rechts schieben, um andere Schlüsselfaktoren anzuzeigen</p>
        <canvas #canvas1></canvas>
      </ion-slide>
      <ion-slide [hidden]='!currentSzenario?.schluesselfaktor2'>
        <p>Nach links oder rechts schieben, um andere Schlüsselfaktoren anzuzeigen</p>
        <canvas #canvas2></canvas> 
      </ion-slide>
      <ion-slide [hidden]='!currentSzenario?.schluesselfaktor3'>
        <p>Nach links oder rechts schieben, um andere Schlüsselfaktoren anzuzeigen</p>
        <canvas #canvas3></canvas> 
      </ion-slide>
      <ion-slide [hidden]='!currentSzenario?.schluesselfaktor4'>
        <p>Nach links oder rechts schieben, um andere Schlüsselfaktoren anzuzeigen</p>
        <canvas #canvas4></canvas> 
      </ion-slide>
      <ion-slide [hidden]='!currentSzenario?.schluesselfaktor5'>
        <p>Nach links oder rechts schieben, um andere Schlüsselfaktoren anzuzeigen</p>
        <canvas #canvas5></canvas> 
      </ion-slide>
      <ion-slide [hidden]='!currentSzenario?.schluesselfaktor6'>
        <p>Nach links oder rechts schieben, um andere Schlüsselfaktoren anzuzeigen</p>
        <canvas #canvas6></canvas> 
      </ion-slide>
    </ion-slides>
</div>

<h4  padding>Szenario von {{currentSzenario?.username}}</h4>

<ion-list>
  <ion-item [hidden]="hilfeVar">
    {{currentSzenario?.szenariotext}}
  </ion-item>
  <div [hidden]="!hilfeVar">
    <ion-list-header no-lines>
      Ausgangslage:
    </ion-list-header>    
    <ion-item padding-left>
      {{currentSzenario?.ausgangslage}}
    </ion-item>
    <ion-list-header no-lines>
      Entwicklung:
    </ion-list-header>    
    <ion-item padding-leftm>
      {{currentSzenario?.entwicklung}}
    </ion-item>
    <ion-list-header no-lines>
      Endzustand:
    </ion-list-header>    
    <ion-item padding-left>
      {{currentSzenario?.endzustand}}
    </ion-item>
  </div>
</ion-list>

<!-- Button, der beim clicken die goToRatingDetail() Funktion aufruft und die aktuelle SzenarioID übergibt -->
<button ion-button padding (click)="goToRatingDetail(currentSzenario.id)"
>Dieses Szenario bewerten und kommentieren</button>


<div padding-top>
  <ion-segment [(ngModel)]="kommunikation">
    <ion-segment-button value="kommentare">
      Kommentare
    </ion-segment-button>
    <ion-segment-button value="statistik">
      Statistik
    </ion-segment-button>
  </ion-segment>
</div>

<div [ngSwitch]="kommunikation">
  <div *ngSwitchCase="'kommentare'">
    <!-- Einbinden des ngx-discus templates. Identifier und url stellen für jeden
    die richtige Comment Section dar (siehe auch szenarioerstellung.ts).
    Die Kommentare sind erst dann sichtbar, wenn eine Bewertung abgegeben wurde. -->
    <!-- <disqus  [identifier] = "pageId" [url]="url" *ngIf="viewComments"></disqus> -->
    <disqus  [identifier] = "pageId" *ngIf="viewComments"></disqus>
    <p *ngIf="!viewComments">Sie müssen zuerst eine Bewertung zu diesem Szenario abgeben, um es kommentieren zu können.</p>
  </div>

  <ion-list *ngSwitchCase="'statistik'">
    <ion-list-header>Entwicklung (0: extrem negativ / 100: extrem positiv)</ion-list-header>
    <ion-item no-lines>
      Score: {{averageV0}}
    </ion-item>
    <ion-list-header>Realitätsnähe (0: sehr unrealistisch / 100: sehr realistisch)</ion-list-header>
    <ion-item no-lines>
      Score: {{averageV1}}
    </ion-item>
    <ion-list-header>Relevanz (0: sehr irrelevant / 100: sehr relevant)</ion-list-header>
    <ion-item no-lines>
      Score: {{averageV2}}
    </ion-item>
    <ion-list-header>Ausführlichkeit (0: sehr oberflächlich / 100: sehr ausführlich)</ion-list-header>
    <ion-item no-lines>
      Score: {{averageV3}}
    </ion-item>
    <ion-list-header>Zusammenhänge (0: sehr zusammenhangslos / 100: sehr viele Zusammenhänge)</ion-list-header>
    <ion-item no-lines>
      Score: {{averageV4}}
    </ion-item>
    <ion-list-header>Widersprüche (0: sehr widersprüchlich / 100: sehr widerspruchsfrei)</ion-list-header>
    <ion-item no-lines>
      Score: {{averageV5}}
    </ion-item>
    <ion-list-header>Faktenlage (0: sehr wenig Fakten / 100: sehr viele Fakten)</ion-list-header>
    <ion-item>
      Score: {{averageV5}}
    </ion-item>
  </ion-list> 
</div>


</ion-content>