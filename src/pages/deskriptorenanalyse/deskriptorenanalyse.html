<ion-header>
  <ion-navbar>
    <button ion-button menuToggle>
      <ion-icon name="menu"></ion-icon>
    </button>
    <ion-title>Entwicklung der Schlüsselfaktoren</ion-title>
  </ion-navbar>
</ion-header>

<ion-content padding>
  <h4 padding-left>Beschreibung</h4>
  <p padding-left padding-bottom>
    Auf dieser Seite werden Sie sich weiter mit den Schlüsselfaktoren beschäftigen. <br>
    Dabei werden Sie Ihre Schlüsselfaktoren über einen Zeitverlauf entwickeln sowie
    in eine Rangfolge bringen.
  </p>
  <h6 padding-left>
    Verschaffen Sie sich einen Überblick über die Funktionen auf dieser Seite:
  </h6>

<!-- slides zur Darstellung der Hilfen, wie man die canvas benutzt.
toggleHilfe blendet die Hilfen ein und aus (siehe ion-toggle).-->
<ion-slides [hidden]="!toggleHilfe">
  <ion-slide>
    <p> Für weitere Erkärungen einfach die Videos hin- und herschieben. </p>
    <p> Zeichnen </p>
    <!-- iframe zur Darstellung der youtube-Videos. Einstellung der Höhe und Breite sowie der Quelle,
    der Rahmens (0 = kein Rahmen) und erlauben des Vollbildmodus -->
    <iframe width="400px" height="300px" [src]="safeURL1" frameborder="0" allowfullscreen></iframe>
  </ion-slide>
  <ion-slide>
    <p> Für weitere Erkärungen einfach die Videos hin- und herschieben. </p>
    <p> Radieren </p>
    <iframe width="400px" height="300px" [src]="safeURL2" frameborder="0" allowfullscreen></iframe>
  </ion-slide>
  <ion-slide>
    <p> Für weitere Erkärungen einfach die Videos hin- und herschieben. </p>
    <p> Zurücksetzen </p>
    <iframe width="400px" height="300px" [src]="safeURL3" frameborder="0" allowfullscreen></iframe>
  </ion-slide>
  <ion-slide>
      <p> Für weitere Erkärungen einfach die Videos hin- und herschieben. </p>
      <p> Faktoren ordnen (Video noch einfügen) </p>
      <iframe width="400px" height="300px" [src]="" frameborder="0" allowfullscreen></iframe>
    </ion-slide>  
</ion-slides>

<!-- ion-toggle zum ein-und ausblenden der Hiflen mittels two-way Data binding -->
  <div>
    <p float-left padding-left class="toggle-text">Erklärungen ein- und ausblenden: </p>
    <ion-toggle [(ngModel)]="toggleHilfe" name="ToggleHilfe" float-left></ion-toggle>
  </div>

<!-- Button, der die showStartEnd() Funktion auslöst. Ist versteckt, wenn hideStartend true ist. -->
<button ion-button (click)="showStartEnd()" [hidden]="hideStartEnd" >Verstanden - Weiter!</button>

<!-- Auswahl der Start- und Endzeitpunkte für das Szenario. Wird eingeblendet, wenn hideStartEnd true ist. -->

<ion-list [hidden]='!hideStartEnd' padding-vertical>
  <ion-list-header>Anfangs- und Endzeitpunkt Ihrer Aktivität:</ion-list-header>
  <ion-item>
      <ion-label>Wählen Sie zunächst Ihre Zeitskala aus:</ion-label>
      <!-- ion-datetime zur Auswahl der Start- und Endzeitpunkte mittels two-way Data binding -->
      <ion-select [(ngModel)]="timeScale" name="TimeScale" cancelText="Abbrechen">
        <ion-option value="HH:mm">Stunden</ion-option>
        <ion-option value="DD">Tage</ion-option>
        <ion-option value="MM">Monate</ion-option>
        <ion-option value="YYYY">Jahre</ion-option>
      </ion-select>
    </ion-item>  
    <ion-item>
      <ion-label>Start Ihrer Aktivität [in {{timeScale}}]</ion-label>
      <!-- ion-datetime zur Auswahl der Start- und Endzeitpunkte mittels two-way Data binding -->
      <ion-datetime displayFormat="HH:mm" pickerFormat="HH:mm"
      [(ngModel)]="startSzenario" (ionChange)="updateStartEnd(startSzenario, endSzenario)" #StartSzenario>
      </ion-datetime>
    </ion-item>
    <ion-item>
      <ion-label>Ende Ihres Szenarios [in {{timeScale}}]</ion-label>
      <ion-datetime displayFormat="HH:mm" pickerFormat="HH:mm"
      [(ngModel)]="endSzenario" (ionChange)="updateStartEnd(startSzenario, endSzenario)" #EndSzenario>
      </ion-datetime>
    </ion-item>
  <!-- Wenn der Button geklickt wird, wird die showDeskriptoren() Funktion aufgerufen.
  Der Button wird dadurch ausgeblendet (hideDeskriptoren = true) -->
  <button ion-button (click)="showDeskriptoren()" [hidden]='hideDeskriptoren'
  [disabled]="!endSzenario">Weiter</button>
</ion-list>




<!-- div zur Darstellung der canvas. Wird eingeblendet, wenn hideDeskriptoren=true. -->
<div [hidden]='!hideDeskriptoren'>
  <!--
  <div>
    <canvas-whiteboard padding #canvasWhiteboard
                       [drawButtonClass]="'fa fa-pencil fa-2x'"
                       [drawButtonText]="'Zeichnen'"
                       [clearButtonClass]="'fa fa-eraser fa-2x canvas_whiteboard_button-clear'"
                       [clearButtonText]="'Zurücksetzen'"
                       [undoButtonText]="'Rückgängig'"
                       [undoButtonEnabled]="true"
                       [redoButtonText]="'Wiederherstellen'"
                       [redoButtonEnabled]="true"
                       [colorPickerEnabled]="true"
                       (onBatchUpdate)="sendBatchUpdate($event)"
                       (onClear)="onCanvasClear()"
                       (onUndo)="onCanvasUndo($event)"
                       (onRedo)="onCanvasRedo($event)">                    
    </canvas-whiteboard>
  </div>
  -->
  <!-- canvas wird nur angezeigt, wenn der User bei SchluesselfaktorenPage bei dem entsprechenden
  Schlüsselfaktor einen Haken gesetzt hat. -->
  <div [hidden]="!schluesselfaktor1">
    <h6>Das gefühlte Gewicht Ihres Rucksackes kann sich während deAktivitä verändern! <br>
        Bitte zeichnen Sie den Verlauf des gefühlten Gewichts während Ihrer Aktivität ein.</h6>
    <canvas #canvas1 class="canvas"></canvas>
    <!-- Buttons, die jeweils Funktionen zum Malen, Radieren oder Zurücksetzen aufrufen. 
    (6 Stück, alle ähnlich.) -->
      <button ion-button (click)="drawCanvas1()" class="draw-button">Zeichnen</button>
      <button ion-button (click)="eraseCanvas1()" outline class="erase-button">Radieren</button>
      <button ion-button (click)="clearCanvas1()" color="danger" class="clear-button">Zurücksetzen</button>
  </div>
  <div [hidden]="!schluesselfaktor2">
    <h6>Bitte zeichnen Sie in das folge Feld ein, wie wichtig Ihnen der Tragekomfort während der Aktivität ist</h6>
    <canvas #canvas2 class="canvas"></canvas>
      <button ion-button (click)="drawCanvas2()" class="draw-button">Zeichnen</button>
      <button ion-button (click)="eraseCanvas2()" outline class="erase-button">Radieren</button>
      <button ion-button (click)="clearCanvas2()" color="danger" class="clear-button">Zurücksetzen</button>
  </div>
  <div [hidden]="!schluesselfaktor3">
    <h6>In dieses Feld sollen Sie einzeichnen, zu welchen Zeitpunkten Ihrer Aktivität die Funktionalitäten
        Ihres Rucksackes wichtig werden. Je wichtiger, desto weiter oben soll die Linie verlaufen.
    </h6>
    <canvas #canvas3 class="canvas"></canvas>
      <button ion-button (click)="drawCanvas3()" class="draw-button">Zeichnen</button>
      <button ion-button (click)="eraseCanvas3()" outline class="erase-button">Radieren</button>
      <button ion-button (click)="clearCanvas3()" color="danger" class="clear-button">Zurücksetzen</button>
  </div>


  <ion-list>
    <h6>An dieser Stelle gilt es, alle Schlüsselfaktoren zu sortieren. Diejenigen Faktoren, die Ihnen
        am wichtigsten sind, sollen oben erscheinen.
    </h6>
      <ion-item-group reorder="true" (ionItemReorder)="reorderItems($event)">
        <div *ngFor="let factor of factors">
          <ion-item *ngIf="factor.show">{{ factor.name }}</ion-item>
        </div>
      </ion-item-group>
  </ion-list>



  <button ion-button (click)="goToAnnahmenPage()" class="weiter" [hidden]='!hideDeskriptoren'>Weiter</button>
</div>

</ion-content>
